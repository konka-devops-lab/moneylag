# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
server.port=${PORT:8080}
server.address=${HOST:0.0.0.0}

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
spring.datasource.url=jdbc:mysql://${DB_HOST:localhost}:3306/${DB_NAME:crud_db}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
spring.datasource.username=${DB_USER:root}
spring.datasource.password=${DB_PASSWORD:password}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=true

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.ssl.enabled=${REDIS_SSL:true}
spring.data.redis.timeout=10000ms

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
app.allowed-origin=${ALLOWED_ORIGIN:}

# ============================================================================
# OBSERVABILITY - METRICS (PROMETHEUS)
# ============================================================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.endpoint.prometheus.enabled=true

# Prometheus export
management.metrics.export.prometheus.enabled=true
management.metrics.tags.application=crud-app

# HTTP request metrics (latency & SLAs)
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.distribution.sla.http.server.requests=100ms,500ms,1s,2s

# Enable core metrics
management.metrics.enable.jvm=true
management.metrics.enable.process=true
management.metrics.enable.system=true
management.metrics.enable.http=true
management.metrics.enable.jdbc=true
management.metrics.enable.redis=true
management.metrics.enable.logback=true

# ============================================================================
# LOGGING CONFIGURATION (CONTAINER FRIENDLY)
# ============================================================================
logging.level.com.example=INFO
logging.level.org.springframework.web=WARN
logging.level.org.hibernate=WARN
logging.level.org.springframework.data.redis=WARN

# Log to STDOUT (best for Docker / EKS / ECS)
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# ============================================================================
# HEALTH CHECKS
# ============================================================================
management.health.redis.enabled=true
management.health.db.enabled=true
management.health.diskspace.enabled=true
management.endpoint.health.probes.enabled=true

# ============================================================================
# DATASOURCE POOL (HIKARI)
# ============================================================================
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.maximum-pool-size=10



# http://docker.konka.online:8080/actuator/health
# http://docker.konka.online:8080/actuator/prometheus
# http://docker.konka.online:8080/actuator/metrics

FEATURE_UPDATE=${FEATURE_UPDATE:false}
FEATURE_DELETE_ALL=${FEATURE_DELETE_ALL:false}

